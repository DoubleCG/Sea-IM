function formPostUrl(e,t){var n=document.createElement("form");if(n.action=e,n.method="post",n.target="_self",n.style.display="none","object"==typeof t)for(var a in t){var o=document.createElement("input");o.name=a,o.value=t[a],console.log(o),n.appendChild(o)}else console.log("Not paraments");document.querySelector("body").appendChild(n),n.submit()}function postChange(e,t,n){var a=JSON.stringify(t),o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send("J_data="+a),o.onreadystatechange=function(){if(4===o.readyState&&200===o.status){var e=JSON.parse(o.responseText);n(e)}}}function postChangeImg(e,t,n){var a=JSON.stringify(t),o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-type","multipart/form-data"),o.send("J_data="+a),o.onreadystatechange=function(){if(4===o.readyState&&200===o.status){var e=JSON.parse(o.responseText);n(e)}}}function postChangeText(e,t,n){var a=JSON.stringify(t),o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send("J_data="+a),o.onreadystatechange=function(){if(4===o.readyState&&200===o.status){var e=JSON.parse(o.responseText);n(e)}}}function ytime(){var e=new Date,t=parseInt(e.getMonth())+1;return e=e.getFullYear()+"."+t+"."+e.getDate()+"   "+e.getHours()+":"+e.getMinutes()}
function checkPasswordForm(){var r=new RegExp(/^[a-z0-9_-]{6,12}$/),e=$(this).val();r.test(e)?($(this).removeClass("red"),$("#errorInfo").attr("class","correct")):($(this).attr("class","red"),$("#errorInfo").text("6~12位数字、大小写字母、中划线、下划线"),$("#errorInfo").attr("class","err"))}$().ready(function(){$("#regist").click(function(){window.location.href="/regist"}),$("#password").change(checkPasswordForm)});
function main(e,n,t,i,a){!function(e){function n(){for(var e=0;e<$(".sOption").length;e++)$(".sOption").eq(e).css("background","#333"),$(".sOption").eq(e).css("background","#fff");for(var n=0;n<$(".sContent").length;n++)$(".sContent").eq(n).css("display","none")}var t=e;$("#logOff").click(function(){window.location.href="/logOff"}),$("#person").click(function(){var e={username:t};formPostUrl("/people",e)}),$("#myteam").click(function(){var e={username:t};formPostUrl("/myteam",e)}),$("#buildTeam").click(function(){var e={username:t};formPostUrl("/buildTeam",e)}),$("#starOption").click(function(){n(),$(this).css("background","transparent"),$(this).css("color","#222"),$("#starContent").css("display","block")}),$("#teamOption").click(function(){n(),$(this).css("background","transparent"),$(this).css("color","#222"),$("#teamContent").css("display","block")}),$("#strangeOption").click(function(){n(),$(this).css("background","transparent"),$(this).css("color","#222"),$("#strangeContent").css("display","block")})}(e),function(e,n){var t=e,i=/&#34;/g,n=JSON.parse(n.replace(i,'"'));$("#user_info").append("<div id='avator'></div><div id='intro'></div><div id='set'><span class='glyphicon glyphicon-list' aria-hidden='true'></span></div>"),$("#avator").append("<img src="+n.headImg+">"),$("#intro").append("<div id='name'></div><div id='introduce'>"+n.introduce+"</div>"),$("#name").append("<div id='nickname'>"+n.nickname+"</div><div id='user_name'>"+t+"</div>"),$("#set").click(function(){var e=$("#domore");void 0===e.__proto__.judge&&(e.__proto__.judge=!1),e.judge?$("#domore").css("width","0px"):$("#domore").css("width","60px"),e.__proto__.judge=!e.__proto__.judge}),$(".sContent").click(function(){$("#domore").css("width","0px"),domore.__proto__.judge=!1})}(e,n),function(e){function n(){$("#search-content #search-info")&&$("#search-content #search-info").remove()}function t(){var e=$("#search-id").val().trim();if(e&&e!==i){$("#search-id").css("width","70%");var n={username:i,id:e},t=JSON.stringify(n);$.post("/search","J_data="+t,function(n){var t=n.team,a=n.person;$("#search-content").append("<div id='search-info'></div>"),t?($("#search-info").append("<div id='search-team'></div>"),$("#search-team").append("<div id='teamImg'><img src="+t.headImg+"></div><div id='tinfo'></div><div id='join'> <span class='glyphicon glyphicon-map-marker' aria-hidden='true'></span>  Join in</div>"),$("#tinfo").append("<div id='teamname'>团队名: "+t.teamname+"</div>"),$("#tinfo").append("<div id='builder'>ID: "+t.id+"</div>"),$("#tinfo").append("<div id='level'>级别: "+t.level+"</div>"),$("#tinfo").append("<div id='membernumber'>人数: "+t.membernumber+"</div>"),$("#tinfo").append("<div id='major'>主修: "+t.major+"</div>"),$("#tinfo").append("<div id='teamintro'>简介: "+t.introduce+"</div>"),$("#join").click(function(){var n={username:i,id:e},t=JSON.stringify(n);$.post("/join_judge","J_data="+t,function(e){"ok"===e?formPostUrl("/join",n):$("#search-team").append("<li class='alert alert-info' role='alert'>已经加入过这个团队</li>")})})):$("#search-info").append("<li  class='alert alert-warning' role='alert'>没有该团队</li>"),a?($("#search-info").append("<div id='search-person'></div>"),$("#search-person").append("<div id='personImg'><img src="+a.headImg+"></div><div id='pinfo'></div>"),$("#search-person").append("<div id='send'><span class='glyphicon glyphicon-envelope' aria-hidden='true'>Mess</div><div id='star'><span class='glyphicon glyphicon-star-empty' aria-hidden='true'></span>Star</div><div id='sms'></div>"),$("#pinfo").append("<div id='nickname'>昵称: "+a.nickname+"</div>"),$("#pinfo").append("<div id='sex'>性别: "+a.sex+"</div>"),$("#pinfo").append("<div id='hobby'>爱好: "+a.hobby+"</div>"),$("#pinfo").append("<div id='personIntro'>简介: "+a.introduce+"</div>"),$("#sms").append("<textarea></textarea>"),$("#sms").append("<div id='tosend'>发送<span class='glyphicon glyphicon-share-alt' aria-hidden='true'></span></div>"),$("#send").click(function(){$("#sms").css("height","120px")}),$("#star").click(function(){var n={id:e,username:i},t=JSON.stringify(n);$.post("/star","J_data="+t,function(e){var n=JSON.parse(e);n?($("#search-person").prepend("<li class='alert alert-success' role='alert'>成功标记该用户!</li>"),createStarLi(i,n)):$("#search-person").prepend("<li class='alert alert-success' role='alert'>已经标记该用户！</li>")})}),$("#tosend").click(function(){var n=$("#sms textarea"),t=n.val().trim(),a=$("#tosend");if(!t.length)return!1;if(t.length>60)return a.css("border","solid 1px red"),a.text("字数不能超过6０"),setTimeout(function(){a.css("border","none"),a.text("发送")},2e3),!1;var s=/[\n"\\]/g;t=t.replace(s,"");var r={to:e,from:i,content:t},o=JSON.stringify(r);socket.emit("peopleChat",o),n.val("Send!"),setTimeout(function(){n.val("")},1e3),n.focus(function(){n.val("")})})):$("#search-info").append("<li  class='alert alert-danger' role='alert'>没有该用户</li>")})}}var i=e;$("#search-content close").click(function(){$("#search-id").val(""),$("#search-id").css("width","78%"),n()}),$("#sub").click(function(){n(),t()}),$("#search-id").keyup(function(e){13===(e.keyCode||e.which||e.charCode)&&(n(),t())})}(e),function(e,n,t){function i(e,n,t){if(n.length){var i=document.createElement("p");i.innerText="["+ytime()+"] ME: "+n;var a=e.parent().siblings("content");a.append(i),a[0].scrollTop=a[0].scrollHeight;var r={content:n,to:t,from:s},o=JSON.stringify(r);socket.emit("peopleChat",o)}}var s=e,t=t;socket.on(s,function(e){for(var n,a=JSON.parse(e),r=$("messageframe"),o=0;o<t.length;o++)if(a.from===t[o]){n=!0;break}if(n)if(console.log("5000"),console.log(r.length),console.log(!r.length),console.log(typeof!r.length),r.length||(console.log(666),document.getElementById("tipvoice").play()),r.find("username").text()===a.from){var c=r.find("cont");(p=document.createElement("p")).innerText="["+ytime()+"]-:"+a.content,c.append(p),c[0].scrollTop=c[0].scrollHeight}else{for(var d=$("#starContent").find("username"),o=0;o<d.length;o++)d[o].innerText===a.from&&($(d[o]).siblings(".badge").length||$(d[o]).after('<span class="badge">!</span>'));$("#starOption .badge").length||$("#starOption").append('<span class="badge">!</span>').click(function(){$("#starOption .badge").remove()})}else{$("#strangeOption .badge").length||$("#strangeOption").append('<span class="badge">!</span>').click(function(){$("#strangeOption .badge").remove()});var p=document.createElement("p");p.innerText="["+ytime()+"] -:"+a.content;for(var l=$("#strangeContent ul li username"),m=!0,o=0;o<l.length;o++)if(l[o].innerText===a.from){$(l[o]).siblings(".badge").length||(console.log(),$(l[o]).after('<span class="badge">!</span>'),$(l[o]).parents("li").click(function(){$(this).find(".badge").remove()}));var f=$(l[o]).siblings("content");f.append(p),f[0].scrollTop=f[0].scrollHeight,m=!1;break}if(!m)return!1;$("#strangeContent ul").prepend("<li></li>");var u=$("#strangeContent ul").find("li").first();u.append('<username></username><close><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></close><content></content><div><input></input><sub_btn>发送<span class="glyphicon glyphicon-share-alt" aria-hidden="true"></span></sub_btn></div>'),u.find("username").text(a.from),u.find("username").after('<span class="badge">!</span>'),u.click(function(){$(this).find(".badge").remove(),$(this).siblings().css("height","40px"),$(this).css("height","350px")}),u.find("close").click(function(){$(this).parent().remove();var e=$(this).siblings("username").text(),n={username:s,str_username:e},t=JSON.stringify(n);$.post("/close_str_mess","J_data="+t)}),u.find("content").append(p),u.find("input").keyup(function(e){if(13!==(e.keyCode||e.which||e.charCode))return!1;var n=this.value.trim(),t=$(this).parent().siblings("username").text();this.value="",i($(this),n,t)}),u.find("sub_btn").click(function(){var e=$(this).siblings("input").val().trim(),n=$(this).parent().siblings("username").text();$(this).siblings("input").val(""),i($(this),e,n)})}});var r=/&#34;/g,n=JSON.parse(n.replace(r,'"'));for(var o in n.sta)c=n.sta[o],createStarLi(s,c);for(var o in n.str){var c=n.str[o];$("#strangeContent ul").append("<li></li>");var d=$("#strangeContent ul").find("li").last();d.append('<username></username><close><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></close><content></content><div><input></input><sub_btn>发送<span class="glyphicon glyphicon-share-alt" aria-hidden="true"></span></sub_btn></div>'),d.find("username").text(o),d.click(function(){$(this).find(".badge").remove(),$(this.parentNode).find(".badge").length||$("#strangeOption").find(".badge").remove(),$(this).siblings().css("height","40px"),$(this).css("height","350px")}),d.find("close").click(function(){$(this).parent().remove();var e=$(this).siblings("username").text(),n={username:s,str_username:e},t=JSON.stringify(n);$.post("/close_str_mess","J_data="+t)});for(var p=0;p<c.length;p++){var l=document.createElement("p");l.innerText="["+c[p].time+"] -: "+c[p].content,d.find("content").append(l)}d.find("input").keyup(function(e){if(13!==(e.keyCode||e.which||e.charCode))return!1;var n=this.value.trim(),t=$(this).parent().siblings("username").text();this.value="",i($(this),n,t)}),d.find("sub_btn").click(function(){var e=$(this).siblings("input").val().trim(),n=$(this).parent().siblings("username").text();$(this).siblings("input").val(""),i($(this),e,n)})}!function(e,n){var t=e,i=/&#34;/g,a=n.replace(i,'"'),n=JSON.parse(a),s=$("#teamContent ul");n.forEach(function(e){s.append("<li></li>");var n=s.find("li").last();n.append("<info><div><teamname></teamname><id></id></div><introduce></introduce></info><avator><img></avator>"),n.find("teamname").text(e.name),n.find("id").text(e.id),n.find("introduce").text(e.intro),n.find("avator img").attr("src",e.avator),socket.on("team"+e.id,function(e){function n(){$("#teamOption .badge").length||$("#teamOption").append('<span class="badge">!</span>').click(function(){$(this).find(".badge").remove()});for(var e=$("#teamContent").find("id"),n=0;n<e.length;n++)if(e[n].innerText===i.to){$(e[n]).after('<span class="badge">!</span>'),$(e[n]).parents("li").click(function(){$(this).find(".badge").remove(),$(this.parentNode).find(".badge").length||$("#teamOption").find(".badge").remove()});break}}var i=JSON.parse(e),a=$("messageframe");if(i.from!==t)if(a.length)if(a.find("id").text()===i.to){var s=a.find("cont"),r=document.createElement("p");r.innerText="["+i.time+"]"+i.from+":"+i.content,s.append(r),s[0].scrollTop=s[0].scrollHeight}else n();else console.log(777),document.getElementById("tipvoice").play(),n()}),n.click(function(){function n(e){if(e.length){var n=$("messageframe").find("cont"),i=document.createElement("p");i.innerText="["+ytime()+"] ME:"+e,n.append(i),n[0].scrollTop=n[0].scrollHeight;var s={content:e,time:ytime(),to:a,from:t},r=JSON.stringify(s);socket.emit("teamChat",r)}}$("messageframe")&&$("messageframe").remove(),$("#content").append("<messageframe></messageframe>");var i=$("messageframe");i.append('<top><close><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span></close><div><teamname></teamname><id></id></div><info><span class="glyphicon glyphicon-menu-hamburger" aria-hidden="true"></span></info></top>'),i.append("<cont></cont>"),i.append('<say><face></face><input></input><subm><span class="glyphicon glyphicon-share-alt" aria-hidden="true"></span></subm></say>'),$("messageframe top div teamname").text("[Team] "+e.name);var a=$(this).find("id").text();$("messageframe top div id").text(a),$.post("/get_team_mess","data="+a,function(e){var n;if((n="string"==typeof e?JSON.parse(e):e).length)for(var t=0;t<n.length;t++){var i=document.createElement("p");i.innerText="["+n[t].time+"]"+n[t].from+":\n"+n[t].content,$("messageframe cont").append(i)}}),$("messageframe top close").click(function(){$("messageframe").remove()}),$("messageframe say input").keyup(function(e){if(13===(e.keyCode||e.which||e.charCode)){var t=$(this).val().trim();this.value="",n(t)}}),$("messageframe say subm").click(function(){var e=$(this).siblings("input"),t=e.val();e.val(""),n(t)})})})}(e,a)}(e,t,i)}function createStarLi(e,n){$("#starContent ul").append("<li></li>");var t=$("#starContent ul").find("li").last();t.append("<info><div><nickname></nickname><username></username></div><introduce></introduce></info><avator><img></avator>"),t.find("nickname").text(n.nickname),t.find("username").text(n.username),t.find("introduce").text(n.introduce),t.find("avator img").attr("src",n.headImg),t.click(function(){$(this).find(".badge").remove(),$(this.parentNode).find(".badge").length||$("#starOption").find(".badge").remove(),$("messageframe")&&$("messageframe").remove(),$("#content").append("<messageframe></messageframe>"),$("messageframe").append("<top></top><cont></cont><say></say>"),$("messageframe top").append('<close><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span></close><div><nickname></nickname><username></username></div><info><span class="glyphicon glyphicon-menu-hamburger" aria-hidden="true"></span></info>'),$("messageframe say").append('<face></face><input></input><subm><span class="glyphicon glyphicon-share-alt" aria-hidden="true"></span></subm>'),$("messageframe top div nickname").text($(this).find("nickname").text()),$("messageframe top div username").text($(this).find("username").text());var n=$(this).find("username").text(),t={username:e,star_username:n},i=JSON.stringify(t);$.post("/get_star_mess","J_data="+i,function(e){e.forEach(function(e){var n=document.createElement("p");n.innerText="["+e.body.time+"] -:"+e.body.content;var t=$("messageframe cont");t.append(n),t[0].scrollTop=t[0].scrollHeight})}),$("messageframe close").click(function(){$("messageframe").remove()}),$("messageframe input").keyup(function(n){if(13!==(n.keyCode||n.which||n.charCode))return!1;starMessageEmit(e)}),$("messageframe subm").click(function(){starMessageEmit(e)})})}function starMessageEmit(e){var n=$("messageframe"),t=n.find("cont"),i=n.find("username").text(),a=n.find("input").val();if(a.length){var s={content:a,to:i,from:e},r=JSON.stringify(s);socket.emit("peopleChat",r);var o=document.createElement("p");o.innerText="["+ytime()+"] ME:"+a,t.append(o),t.scrollTop(t[0].scrollHeight),n.find("input").val("")}}
function tipUserName(){$("#tip").text("字母开头，长度为6-16，数字、大小写字母和特殊字符混合")}function tipPw(){$("#tip").text("长度为8-16，数字和大小写字母混合")}function tipPww(){$("#tip").text("请重复你的密码")}function tipEmail(){$("#tip").text("请输入正确邮箱地址")}function formSubmit(){var e=new RegExp(/^[a-zA-Z].{5,15}$/),t=new RegExp(/^[a-zA-Z0-9]{8,16}$/),s=new RegExp(/^\w+@\w+\.[a-z]{2,3}$/),o=$("#username").val(),r=$("#password").val(),i=$("#passwordCheck").val(),a=$("#email").val(),p={user:e.test(o),pw:t.test(r)&&pwCheck(r,i),email:s.test(a)},n="";e.test(o)?$("#username").removeClass("redBorder"):(n+="<p>用户名不正确</p>",$("#username").addClass("redBorder")),t.test(r)?$("#password").removeClass("redBorder"):(n+="<p>密码不正确</p>",$("#password").addClass("redBorder")),pwCheck(r,i)||(n+="<p>两次密码不一样</p>"),s.test(a)?$("#email").removeClass("redBorder"):(n+="<p>电子邮箱不正确</p>",$("#email").addClass("redBorder")),$("#tip").html(n),console.log(p.user&&p.pw&&p.email),p.user&&p.pw&&p.email?(console.log(30),$("#registForm").submit()):console.log(29)}function pwCheck(e,t){return e===t}$().ready(function(){$("#username").focus(tipUserName),$("#password").focus(tipPw),$("#passwordCheck").focus(tipPww),$("#email").focus(tipEmail),$("#sub").click(formSubmit),$("#backtologin").click(function(){window.location.href="/"})}),$("body").keydown(function(e){13==e.which&&formSubmit()});
function buildTeam(t){$("#back").click(function(){var a={username:t};formPostUrl("/main",a)});var a=$("#teamname"),s=$("#password"),e=$("#passworda"),o=$("#major");a.focus(function(){$("#tipteamname").css("color","green"),$("#tipteamname").html("<p>Your team's nickname:(length between 4 and 20)</p>")}),s.focus(function(){$("#tippassword").css("color","green"),$("#tippassword").html("<p>Your team's password:(length between 3 and 8)</p>")}),e.focus(function(){$("#tippassworda").css("color","green"),$("#tippassworda").html("<p>Ensure you password</p>")}),o.focus(function(){$("#tipmajor").css("color","green"),$("#tipmajor").html("<p>Your team is major in:?(length between 2 and 20)</p>")}),$("#sub").click(function(){var m=a.val().trim(),r=s.val().trim(),p=e.val().trim(),n=o.val().trim(),i={tn:/^.{4,20}$/,pw:/^\w{3,8}$/,mj:/^.{2,20}$/},c={};i.tn.test(m)?(c.tn=!0,$("#tipteamname").html("")):(c.tn=!1,$("#tipteamname").css("color","red"),$("#tipteamname").html("<p>Teamname False</p>"));var l=r===p;if(i.pw.test(r)&&l?($("#tippassword").html(""),$("#tippassworda").html(""),c.pw=!0):(c.pw=!1,l||($("#tippassworda").css("color","red"),$("#tippassworda").html("<p>Twice Password Not Same</p>")),i.pw.test(r)||($("#tippassword").css("color","red"),$("#tippassword").html("<p>Password False</p>"))),i.mj.test(n)?($("#tipmajor").html(""),c.mj=!0):(c.mj=!1,$("#tipmajor").css("color","red"),$("#tipmajor").html("<p>Major False</p>")),c.tn&&c.pw&&c.mj){var w=document.createElement("input");w.name="username",w.value=t,$("#teamForm").append(w),$("#teamForm").submit()}})}
function myteam(e,n,r,t,a){var l=document;l.querySelector("buildtip").innerText=t,l.querySelector("jointip").innerText=a,t.length&&(l.querySelector("#update").style.display="none"),l.querySelector("#back").onclick=function(){var n={username:e};formPostUrl("/main",n)},l.querySelector("#update").onclick=function(){var n={username:e};formPostUrl("/teams",n)};var m=new RegExp("&#34;","g"),i=l.querySelector("bteam");if(n.length){var n=n.replace(m,'"');n=JSON.parse(n);var d=l.createElement("info"),p=l.createElement("id"),c=l.createElement("teamname"),o=l.createElement("level"),u=l.createElement("membernumber"),h=l.createElement("major"),E=l.createElement("introduce"),C=l.createElement("avator"),v=l.createElement("img");C.appendChild(v),d.appendChild(p),d.appendChild(c),d.appendChild(o),d.appendChild(u),d.appendChild(h),d.appendChild(E),i.appendChild(C),i.appendChild(d),v.src=n.headImg,p.innerText="ID: "+n.id,c.innerText="Teamname: "+n.teamname,o.innerText="Level: "+n.level,u.innerText="Member number: "+n.membernumber,h.innerText="Major: "+n.major,E.innerText="Introduce: "+n.introduce}var T=l.querySelector("jteam ul"),r=r.replace(m,'"');(r=JSON.parse(r)).forEach(function(e){var n=l.createElement("li"),r=l.createElement("info"),t=l.createElement("id"),a=l.createElement("teamname"),m=l.createElement("level"),i=l.createElement("membernumber"),d=l.createElement("major"),p=l.createElement("introduce"),c=l.createElement("avator"),o=l.createElement("img");c.appendChild(o),r.appendChild(t),r.appendChild(a),r.appendChild(m),r.appendChild(i),r.appendChild(d),r.appendChild(p),n.appendChild(c),n.appendChild(r),T.appendChild(n),o.src=e.headImg,t.innerText="ID: "+e.id,a.innerText="Teamname: "+e.teamname,m.innerText="Level: "+e.level,i.innerText="Member number: "+e.membernumber,d.innerText="Major: "+e.major,p.innerText="Introduce: "+e.introduce})}
function people(e){var t=document;t.getElementById("headImg").onclick=function(){t.getElementById("peopleHeadForm").style.display="block"},t.getElementById("back").onclick=function(){var t={username:e};formPostUrl("/main",t)},$("#headUpdate").click(function(){if(!$("#avator").val().length)return $("#avator").css("border","solid 1px #449933"),!1;var a=t.createElement("input");a.style.display="none",a.name="username",a.value=e;var n=$("#peopleHeadForm");n.append(a),n.submit()}),$("#textUpdate").click(function(){var t=$("#nickname").val().trim(),a=$("#introduce").val().trim(),n=$("#sex").val().trim(),r=$("#hobby").val().trim(),o=$("#birthday").val().trim();if(t.length>10)return $("#nickname").css("border","solid 1px red"),$("button#textUpdate").text("昵称字数过长"),setTimeout(function(){$("button#textUpdate").text("更新")},2e3),!1;if(a.length>60)return $("textarea#introduce").css("border","solid 1px red"),$("button#textUpdate").text("简介字数不能超过6０"),setTimeout(function(){$("button#textUpdate").text("更新")},2e3),!1;var i={username:e,nickname:t,introduce:a,sex:n,hobby:r,birthday:o};!function(e){if("object"==typeof e){var t=/[\n"\\]/g;for(para in e)e[para]=e[para].replace(t,"")}}(i),postChangeText("/peopleT",i,function(e){$("#nickname").val(e.nickname),$("#introduce").val(e.introduce),$("#sex").val(e.sex),$("#hobby").val(e.hobby),$("#birthday").val(e.birthday)})})}
function teams(e){var t=document;t.getElementById("headImg").onclick=function(){t.getElementById("teamHeadForm").style.display="block"},t.getElementById("back").onclick=function(){var t={username:e};formPostUrl("/main",t)},$("#headUpdate").click(function(){if(!$("#avator").val().length)return $("#avator").css("border","solid 1px #449933"),!1;var t=document.createElement("input");t.style.display="none",t.name="id",t.value=e;var a=$("#teamHeadForm");a.append(t),a.submit()}),$("#textUpdate").click(function(){var t=$("#teamname").val().trim(),a=$("#major").val().trim(),n=$("#introduce").val().trim();if(n.length>80)return $("textarea#introduce").css("border","solid 1px red"),$("button#textUpdate").text("简介字数不能超过８０"),setTimeout(function(){$("button#textUpdate").text("更新")},2e3),!1;var o={id:e,teamname:t,major:a,introduce:n};!function(e){if("object"==typeof e){var t=/[\n"\\]/g;for(para in e)e[para]=e[para].replace(t,""),console.log(e[para])}else console.log("No Object")}(o),postChangeText("/teamsT",o,function(e){$("#teamname").val(e.teamname),$("#major").val(e.major),$("#introduce").val(e.introduce)})})}