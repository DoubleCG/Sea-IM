<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>SeaNet</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/login.css">
  <link rel="stylesheet" href="css/people.css">
  <link rel="stylesheet" href="css/teams.css">
</head>

<body>

<div class='container' id='main' >
  
  <div id="content" >
    <domore-part></domore-part>
  <router-view></router-view>


    <div id="checkMess" >
      <user-info
        v-bind:info='userInfo'
      ></user-info>
      <search-content></search-content>
      <div id="messOption" v-on:click='hideDomore'>
        <div 
          v-on:click="listSeen($event,'recent')" 
          id='recentOption' 
          class='sOption'
        >
          <span 
            class="glyphicon glyphicon-pencil" 
            aria-hidden="true"
          ></span>
        </div>
        <div 
          v-on:click="listSeen($event,'star')" 
          id='starOption' 
          class='sOption'
        >
          <span 
            class="glyphicon glyphicon-star" 
            aria-hidden="true"
          ></span>
        </div>
        <div 
          v-on:click="listSeen($event,'team')" 
          id='teamOption'
          class='sOption'
          >
          <span
            class="glyphicon glyphicon-fire"
            aria-hidden="true"
          ></span>
        </div>
      </div>
      <div
        id="messContent"
        v-on:click='hideDomore'
      >
        <div
          v-show="messShowType === 'recent'"
          id="recentContent"
          class='sContent'
        >
          <mess-lis 
            type='recent'
            v-bind:info = 'recentInfo'
          ></mess-lis>
        </div>
        <div
          v-show="messShowType === 'star'"
          id="starContent"
          class='sContent'
        >
          <mess-lis
            type='star'
            v-bind:info = 'starInfo'
          ></mess-lis>
        </div>
        <div
          v-show="messShowType === 'team'"
          id="teamContent"
          class='sContent'
        >
          <mess-lis
            type = 'team'
            v-bind:info = 'teamInfo'
          ></mess-lis>
        </div>
      </div>
    </div>
  </div>

  <div
    class='logOffJudgeHide'
    v-bind:class='{logOffJudgeShow:isWantToLogOff}'
  >
        <div class='title'>
          确认注销吗？
        </div>

        <div
          id='ensureLogOff-btn'
          v-on:click = 'ensureLogOff'
        >确认</div>
        <div
          id='cancelLogOff-btn'
          v-on:click = 'cancelLogOff'
        >取消</div>

    </div>
</div>

<footer
    style='position:fixed;
        height:10px;
        display:block;
        width:100%;
        bottom:2%;   
        text-align:center;'
>
<ul
    style='list-style: none;padding:0;margin:0;'
>
    <li>@SeaNet</li>
</ul>
</footer>


<script src='vue/vue.js'></script>
<script src='jquery/jquery.min.js'></script>
<script src='bootstrap/js/bootstrap.min.js'></script>
<script src='js/zhelp.js'></script>
<script>
  //var UID = localStorage.getItem('UID');
  var UID = sessionStorage.getItem('UID');
    var UserEnsure = {
    uid:UID
  };

    console.log(UID);

    if(!UID){
        localStorage.setItem('UID','wait');
        sessionStorage.setItem('UID','wait');
        window.location.href = '/';
    }

</script>



<script src="/socket.io/socket.io.js"></script>
<script>var socket = io();</script>

<script>



/*声音资源*/
var LoginSound = new Audio('voice/successLogin.wav');
var TeamMessageCome = new Audio('voice/tmessageCome.wav');
var PersonMessageCome = new Audio('voice/pmessageCome.wav');

LoginSound.play();

var UserInfo = JSON.parse(jsonKeep("<%=user_info%>"));
var Loginlist = JSON.parse(jsonKeep('<%=loginlist%>'));
var PunRead = JSON.parse(jsonKeep('<%=punRead%>'));
var TunRead = JSON.parse(jsonKeep('<%=tunRead%>'));
var RecentInfo = JSON.parse(jsonKeep('<%=recentinfo%>'));
var StarInfo = JSON.parse(jsonKeep('<%=starinfo%>'));
var TeamInfo = JSON.parse(jsonKeep('<%=teaminfo%>'));


// console.log('userInfo:');
// console.log(UserInfo);

// console.log('loginlist:');
// console.log(Loginlist);

// console.log('recentInfo:');
// console.log(RecentInfo);
// console.log('starInfo:');
// console.log(StarInfo);
// console.log('teamInfo:');
// console.log(TeamInfo);


// for(var i of RecentInfo){
  var isTeam = Boolean(RecentInfo.level);
  var uid = i.uid;
  i.unread = (isTeam)?TunRead[uid]:PunRead[uid];    
}

for(var i of StarInfo){
  i.unread = PunRead[i.uid];
}

for(var i of TeamInfo){
  i.unread = TunRead[i.uid];
}


</script>

<script src='vue/vue-router.js'></script>
<script>
  const router = new VueRouter({
    routes: [
      // 动态路径参数 以冒号开头
      { path: '/buildteam', component: User }
    ]
  })
</script>


</body>
</html>